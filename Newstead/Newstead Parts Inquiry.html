<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Newstead Parts Inquiry</title>
  <style>
    /* your existing styles unchanged */
    /* ... */
  </style>
</head>
<body>
<div class="container">
  <h1>Newstead Parts Inquiry</h1>
  <form id="partsInquiryForm">
    <div class="form-header">
      <p>Please fill out the form below to inquire about parts.</p>
    </div>
    <!-- Customer Information -->
    <div>
      <label for="fullName">Full Name:</label>
      <input type="text" id="fullName" name="fullName" required>

      <label for="phoneNumber">Phone Number:</label>
      <input type="tel" id="phoneNumber" name="phoneNumber" required>

      <label for="email">Email Address:</label>
      <input type="email" id="email" name="email" required>

      <label for="carMake">Car Make:</label>
      <input type="text" id="carMake" name="carMake" required>

      <label for="regoVin">Queensland Registration Number / VIN:</label>
      <input type="text" id="regoVin" name="regoVin" required>

      <label for="dateOfInquiry">Date of Inquiry:</label>
      <input type="date" id="dateOfInquiry" name="dateOfInquiry" required>

      <label for="contactMethod">Preferred Contact Method:</label>
      <input type="text" id="contactMethod" name="contactMethod" required>
    </div>

    <!-- Parts Inquiry Details -->
    <div class="parts-container" id="partsContainer">
      <div class="part-item" id="part1">
        <label for="part1">Part 1 - Name/Description:</label>
        <input type="text" id="part1" name="part1[]" required>

        <label for="partNumber1">Part Number (if known):</label>
        <input type="text" id="partNumber1" name="partNumber1[]">

        <label for="quantity1">Quantity:</label>
        <input type="number" id="quantity1" name="quantity1[]" required>

        <label for="notes1">Additional Notes:</label>
        <textarea id="notes1" name="notes1[]"></textarea>
        <span class="remove-part-btn" onclick="removePart('part1')">Remove Part</span>
      </div>
    </div>

    <button type="button" id="addPartBtn" class="add-part-btn">+ Add Another Part</button>
    <button type="submit">Submit Inquiry</button>
  </form>
</div>

<!-- Add this script block -->
<script>
  let partCount = 1;

  document.getElementById('addPartBtn').addEventListener('click', function () {
    partCount++;
    const newPart = document.createElement('div');
    newPart.classList.add('part-item');
    newPart.id = 'part' + partCount;

    newPart.innerHTML = `
      <label for="part${partCount}">Part ${partCount} - Name/Description:</label>
      <input type="text" id="part${partCount}" name="part1[]" required>

      <label for="partNumber${partCount}">Part Number (if known):</label>
      <input type="text" id="partNumber${partCount}" name="partNumber1[]">

      <label for="quantity${partCount}">Quantity:</label>
      <input type="number" id="quantity${partCount}" name="quantity1[]" required>

      <label for="notes${partCount}">Additional Notes:</label>
      <textarea id="notes${partCount}" name="notes1[]"></textarea>
      <span class="remove-part-btn" onclick="removePart('part${partCount}')">Remove Part</span>
    `;
    document.getElementById('partsContainer').appendChild(newPart);
  });

  function removePart(partId) {
    const partElement = document.getElementById(partId);
    if (partElement) partElement.remove();
  }

  document.getElementById("partsInquiryForm").addEventListener("submit", async function (e) {
    e.preventDefault();

    const formData = new FormData(this);
    let content = '';
    for (let [key, value] of formData.entries()) {
      content += `${key}: ${value}\n`;
    }

    // âœ… Replace these with your actual GitHub info and token (store token securely for production)
    const GITHUB_USER = 'YOUR_GITHUB_USERNAME';
    const REPO_NAME = 'YOUR_REPOSITORY_NAME';
    const TOKEN = 'YOUR_GITHUB_PERSONAL_ACCESS_TOKEN';

    const response = await fetch(`https://api.github.com/repos/${GITHUB_USER}/${REPO_NAME}/issues`, {
      method: 'POST',
      headers: {
        'Authorization': `token ${TOKEN}`,
        'Accept': 'application/vnd.github.v3+json'
      },
      body: JSON.stringify({
        title: `New Parts Inquiry from ${formData.get('fullName')}`,
        body: content
      })
    });

    if (response.ok) {
      alert('Form submitted successfully! Thank you.');
      this.reset();
    } else {
      alert('There was an error submitting the form.');
      console.error(await response.json());
    }
  });
</script>

</body>
</html>
